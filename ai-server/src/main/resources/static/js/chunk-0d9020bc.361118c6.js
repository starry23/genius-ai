(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d9020bc"],{"1ab2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vip_list_warp"},[r("div",{staticClass:"vip_list-head"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addVip}},[e._v("新增配置")])],1),r("div",{staticClass:"content"},[r("el-table",{staticStyle:{width:"100%"},attrs:{height:"85vh",data:e.tableData}},[r("el-table-column",{attrs:{label:"序号",type:"index"}}),e._l(e.tableColumnList,(function(e){return r("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label}})})),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[2===t.row.status?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.productOnOffline(1,t.row.id)}}},[e._v("上线")]):e._e(),1===t.row.status?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.productOnOffline(2,t.row.id)}}},[e._v("下线")]):e._e(),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.editVip(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.deleteVip(t.row)}}},[e._v("删除")])]}}])})],2)],1),r("addorEdit",{ref:"addorEditRef",attrs:{productTypeList:e.productTypeList,getMemberList:e.getMemberList}})],1)},n=[],s=r("c7eb"),o=r("1da1"),c=(r("d3b7"),r("159b"),r("7db0"),r("b775"));function u(){return Object(c["a"])({url:"/api/manager/productConsumeConfigs",method:"get"})}function i(){return Object(c["a"])({url:"/api/dict/productType",method:"get"})}function l(e){return Object(c["a"])({url:"/api/manager/productConsumeConfigSaveOrUpdate",method:"post",data:e})}function p(e){return Object(c["a"])({url:"/api/manager/productConsumeConfig/".concat(e),method:"delete"})}function f(e){return Object(c["a"])({url:"/api/manager/productConsumeConfig/onOff",method:"post",data:e})}var d=[{prop:"productTypeLabel",label:"商品类型"},{prop:"consumeCurrency",label:"消耗虚拟币数量"},{prop:"consumeTypelabel",label:"消费类型"},{prop:"statusCn",label:"状态"},{prop:"useAuthCn",label:"权限"},{prop:"createBy",label:"创建人"},{prop:"createTime",label:"创建时间\t"}],m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{"destroy-on-close":!0,title:e.rowData?"编辑":"新建",visible:e.dialogVisible,width:"550px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"商品类型",prop:"productType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择商品类型"},model:{value:e.form.productType,callback:function(t){e.$set(e.form,"productType",t)},expression:"form.productType"}},e._l(e.productTypeList,(function(e){return r("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1),r("el-form-item",{attrs:{label:"消耗虚拟币数量\t",prop:"consumeCurrency"}},[r("el-input",{attrs:{type:"number",placeholder:"请输消耗虚拟币数量"},model:{value:e.form.consumeCurrency,callback:function(t){e.$set(e.form,"consumeCurrency",t)},expression:"form.consumeCurrency"}})],1),r("el-form-item",{attrs:{label:"消费类型",prop:"consumeType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择消费类型"},model:{value:e.form.consumeType,callback:function(t){e.$set(e.form,"consumeType",t)},expression:"form.consumeType"}},[r("el-option",{attrs:{label:"次数",value:1}}),r("el-option",{attrs:{label:"token ",value:2}})],1)],1),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[r("el-option",{attrs:{label:"上线",value:1}}),r("el-option",{attrs:{label:"下线",value:2}})],1)],1),r("el-form-item",{attrs:{label:"使用权限",prop:"useAuth"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择使用权限"},model:{value:e.form.useAuth,callback:function(t){e.$set(e.form,"useAuth",t)},expression:"form.useAuth"}},[r("el-option",{attrs:{label:"会员",value:1}}),r("el-option",{attrs:{label:"常规用户",value:2}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},b=[],h=(r("e9c4"),r("a9e3"),{props:["getMemberList","productTypeList"],data:function(){return{rowData:null,dialogVisible:!1,form:{productType:"",consumeCurrency:"",consumeType:1,status:1,useAuth:2},rules:{productType:[{required:!0,message:"请选择商品类型"}],consumeCurrency:[{required:!0,message:"请输消耗虚拟币数量"}],consumeType:[{required:!0,message:"请选择消费类型"}],status:[{required:!0,message:"请选择类型"}],useAuth:[{required:!0,message:"请选择使用权限"}]}}},methods:{getPage:function(e){this.dialogVisible=!0,this.form={productType:"",consumeCurrency:"",consumeType:1,status:1,useAuth:2},e&&(console.log(e,"2222"),this.rowData=e,this.form=JSON.parse(JSON.stringify(e)),this.form.productType=Number(this.form.productType))},handleClose:function(){this.dialogVisible=!1},memberConfigSaveOrUpdateFn:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l(e.form);case 3:r=t.sent,200===r.code?(e.$message({type:"success",message:"新建会员卡成功"}),e.handleClose(),e.getMemberList()):e.$message({type:"error",message:r.message}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.memberConfigSaveOrUpdateFn()}))}}}),y=h,g=r("2877"),v=Object(g["a"])(y,m,b,!1,null,null,null),w=v.exports,T={data:function(){return{tableColumnList:d,tableData:[],productTypeList:[]}},components:{addorEdit:w},methods:{productOnOffline:function(e,t){var r=this;return Object(o["a"])(Object(s["a"])().mark((function a(){var n,o;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n={status:e,id:t},a.next=4,f(n);case 4:o=a.sent,200==o.code?(r.getMemberList(),r.$message({type:"success",message:"操作成功"})):r.$message({type:"error",message:o.message}),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},deleteVip:function(e){var t=this;this.$confirm("此操作将永久删除数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){p(e.id).then((function(e){200===e.code?(t.$message({type:"success",message:"删除成功!"}),t.getMemberList()):t.$message({type:"error",message:e.message})}))}))},getProductTypeListFn:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i();case 3:r=t.sent,200===r.code&&(e.productTypeList=r.result||[]),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getMemberList:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){var r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u();case 3:r=t.sent,200===r.code&&(e.tableData=r.result||[],e.tableData.forEach((function(t){var r=e.productTypeList.find((function(e){return e.key==t.productType}));switch(r&&(t.productTypeLabel=r.value),1===t.consumeType?t.consumeTypelabel="次数":2===t.consumeType&&(t.consumeTypelabel="token"),t.status){case 1:t.statusCn="上线";break;case 2:t.statusCn="下线";break}switch(t.useAuth){case 1:t.useAuthCn="会员";break;case 2:t.useAuthCn="常规用户";break}}))),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},addVip:function(){this.$refs.addorEditRef.getPage()},editVip:function(e){this.$refs.addorEditRef.getPage(e)}},mounted:function(){var e=this;return Object(o["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getProductTypeListFn();case 2:return t.next=4,e.getMemberList();case 4:case"end":return t.stop()}}),t)})))()}},k=T,O=(r("32a8"),Object(g["a"])(k,a,n,!1,null,"5f35062e",null));t["default"]=O.exports},"32a8":function(e,t,r){"use strict";r("465e")},"408a":function(e,t,r){var a=r("e330");e.exports=a(1..valueOf)},"465e":function(e,t,r){},"7db0":function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").find,s=r("44d2"),o="find",c=!0;o in[]&&Array(1)[o]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s(o)},a9e3:function(e,t,r){"use strict";var a=r("83ab"),n=r("da84"),s=r("e330"),o=r("94ca"),c=r("cb2d"),u=r("1a2d"),i=r("7156"),l=r("3a9b"),p=r("d9b5"),f=r("c04e"),d=r("d039"),m=r("241c").f,b=r("06cf").f,h=r("9bf2").f,y=r("408a"),g=r("58a8").trim,v="Number",w=n[v],T=w.prototype,k=n.TypeError,O=s("".slice),C=s("".charCodeAt),x=function(e){var t=f(e,"number");return"bigint"==typeof t?t:_(t)},_=function(e){var t,r,a,n,s,o,c,u,i=f(e,"number");if(p(i))throw k("Cannot convert a Symbol value to a number");if("string"==typeof i&&i.length>2)if(i=g(i),t=C(i,0),43===t||45===t){if(r=C(i,2),88===r||120===r)return NaN}else if(48===t){switch(C(i,1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+i}for(s=O(i,2),o=s.length,c=0;c<o;c++)if(u=C(s,c),u<48||u>n)return NaN;return parseInt(s,a)}return+i};if(o(v,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var L,j=function(e){var t=arguments.length<1?0:w(x(e)),r=this;return l(T,r)&&d((function(){y(r)}))?i(Object(t),r,j):t},N=a?m(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;N.length>A;A++)u(w,L=N[A])&&!u(j,L)&&h(j,L,b(w,L));j.prototype=T,T.constructor=j,c(n,v,j,{constructor:!0})}}}]);