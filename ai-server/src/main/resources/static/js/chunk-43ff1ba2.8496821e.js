(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43ff1ba2"],{"2b9b":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"h",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return u})),a.d(t,"e",(function(){return p})),a.d(t,"i",(function(){return d}));var n=a("b775");function r(){return Object(n["a"])({url:"/api/manager/config/getSetting",method:"get"})}function c(){return Object(n["a"])({url:"/api/manager/config/getOssSetting",method:"get"})}function o(e){return Object(n["a"])({url:"/api/manager/config/saveSetting",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/api/manager/config/saveOssSetting",method:"post",data:e})}function i(){return Object(n["a"])({url:"/api/dict/leftMenuType",method:"get"})}function l(){return Object(n["a"])({url:"/api/mj/manager/tenantInfo",method:"get"})}function u(e){return Object(n["a"])({url:"/api/manager/config/saveOrUpdateMilvus",method:"post",data:e})}function p(){return Object(n["a"])({url:"/api/manager/config/milvus",method:"get"})}function d(e){return Object(n["a"])({url:"/api/manager/config/updatePassword",method:"post",data:e})}},"5e75":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"openPlatformConfigWarp"},[a("div",{staticClass:"vip_list-head"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addData}},[e._v("新增配置")])],1),a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:"80vh",data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),e._l(e.tableColumnList,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,label:e.label}})})),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.copyPublicKey(t.row)}}},[e._v("复制公钥")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.copyPrivateKey(t.row)}}},[e._v("复制私钥")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.editData(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return e.deleteData(t.row)}}},[e._v("删除")])]}}])})],2),a("el-pagination",{staticStyle:{float:"right"},attrs:{"current-page":e.paramsObj.current,"page-sizes":[10,20,50,100],"page-size":e.paramsObj.size,layout:"total, sizes, prev, pager, next",total:e.paramsObj.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("addorEdit",{ref:"addorEditRef",attrs:{menuList:e.menuList,getData:e.getData}})],1)},r=[],c=a("c7eb"),o=a("1da1"),s=(a("d3b7"),a("159b"),a("7db0"),[{prop:"mchId",label:"商户号"},{prop:"mchDesc",label:"商户描述"},{prop:"menuCodeNameCn",label:"跳转菜单"},{prop:"publicKeyCopy",label:"公钥"},{prop:"privateKeyCopy",label:"私钥"},{prop:"createBy",label:"创建人"},{prop:"createTime",label:"创建时间\t"}]),i=a("b775");function l(e){return Object(i["a"])({url:"/api/manager/open-api/list",method:"get",params:e})}function u(e){return Object(i["a"])({url:"/api/manager/open-api/generateKeyPair",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/api/manager/open-api/generateMchId",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/api/manager/open-api/saveOrUpdate",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/api/manager/open-api/copy",method:"post",data:e})}function f(e){return Object(i["a"])({url:"/api/manager/open-api/delete/".concat(e),method:"DELETE"})}var b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"destroy-on-close":!0,title:e.rowData?"编辑配置":"新增配置",visible:e.dialogVisible,width:"550px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商户号",prop:"mchId"}},[a("el-row",{attrs:{gutter:10,align:"middle",type:"flex"}},[a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{placeholder:"请输入商户号"},model:{value:e.form.mchId,callback:function(t){e.$set(e.form,"mchId",t)},expression:"form.mchId"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.generateMchIdFn}},[e._v("一键生成")])],1)],1)],1),a("el-form-item",{attrs:{label:"商户描述",prop:"mchDesc"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入商户描述"},model:{value:e.form.mchDesc,callback:function(t){e.$set(e.form,"mchDesc",t)},expression:"form.mchDesc"}})],1),a("el-form-item",{attrs:{label:"公钥",prop:"publicKey"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入公钥"},model:{value:e.form.publicKey,callback:function(t){e.$set(e.form,"publicKey",t)},expression:"form.publicKey"}})],1),a("el-form-item",{attrs:{label:"私钥",prop:"privateKey"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入私钥"},model:{value:e.form.privateKey,callback:function(t){e.$set(e.form,"privateKey",t)},expression:"form.privateKey"}})],1),a("el-form-item",{attrs:{label:"跳转菜单编码"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择跳转菜单编码"},model:{value:e.form.menuCode,callback:function(t){e.$set(e.form,"menuCode",t)},expression:"form.menuCode"}},e._l(e.menuList,(function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})})),1)],1)],1),a("div",{staticClass:"info"},[a("a",{attrs:{target:"_blank",href:"https://www.yuque.com/apetoo/qri3fg/nqzgzc7x0mvdi2wn"}},[e._v("点击查看接入流程文档")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.generateKeyPairFn}},[e._v("生成公钥&私钥")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},h=[],g=(a("e9c4"),{props:["getData","menuList"],data:function(){return{rowData:null,dialogVisible:!1,form:{publicKey:"",privateKey:"",mchId:"",menuCode:"",mchDesc:""},rules:{publicKey:[{required:!0,message:"公钥不能为空"}],privateKey:[{required:!0,message:"私钥不能为空"}],mchId:[{required:!0,message:"商户号不能为空"}]}}},methods:{getPage:function(e){this.dialogVisible=!0,this.form={publicKey:"",privateKey:"",mchId:"",menuCode:""},e&&(this.rowData=e,this.form=JSON.parse(JSON.stringify(e)))},handleClose:function(){this.dialogVisible=!1},generateKeyPairFn:function(){var e=this;return Object(o["a"])(Object(c["a"])().mark((function t(){var a,n;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u();case 3:a=t.sent,200===a.code?(e.$message({type:"success",message:"生成成功"}),n=a.result,e.form.privateKey=n.privateKey,e.form.publicKey=n.publicKey):e.$message({type:"error",message:a.message}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},generateMchIdFn:function(){var e=this;return Object(o["a"])(Object(c["a"])().mark((function t(){var a;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p();case 3:a=t.sent,200===a.code?(e.$message({type:"success",message:"生成成功"}),e.form.mchId=a.result||""):e.$message({type:"error",message:a.message}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},saveOrUpdateFn:function(){var e=this;return Object(o["a"])(Object(c["a"])().mark((function t(){var a;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d(e.form);case 3:a=t.sent,200===a.code?(e.$message({type:"success",message:"新增配置成功"}),e.handleClose(),e.getData()):e.$message({type:"error",message:a.message}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.saveOrUpdateFn()}))}}}),v=g,y=(a("f04b"),a("2877")),O=Object(y["a"])(v,b,h,!1,null,null,null),w=O.exports,j=a("2b9b"),x={data:function(){return{tableColumnList:s,tableData:[],menuList:[],paramsObj:{size:10,current:1,total:0,mchId:""}}},components:{addorEdit:w},methods:{deleteData:function(e){var t=this;this.$confirm("此操作将永久删除配置, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){f(e.id).then((function(e){200===e.code?(t.$message({type:"success",message:"删除成功!"}),t.getData()):t.$message({type:"error",message:e.message})}))}))},editData:function(e){this.$refs.addorEditRef.getPage(e)},addData:function(){this.$refs.addorEditRef.getPage()},getLeftMenuTypeFn:function(){var e=this;return Object(o["a"])(Object(c["a"])().mark((function t(){var a;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(j["a"])();case 3:a=t.sent,200===a.code&&(e.menuList=a.result||[]),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},copyPublicKey:function(e){var t=this;return Object(o["a"])(Object(c["a"])().mark((function a(){var n,r,o;return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m(e);case 3:n=a.sent,200===n.code&&(o=null===n||void 0===n||null===(r=n.result)||void 0===r?void 0:r.publicKey,t.$copyText(o).then((function(e){t.$message({type:"success",message:"复制成功"})}))),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},copyPrivateKey:function(e){var t=this;return Object(o["a"])(Object(c["a"])().mark((function a(){var n,r,o;return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m(e);case 3:n=a.sent,200===n.code&&(o=null===n||void 0===n||null===(r=n.result)||void 0===r?void 0:r.privateKey,t.$copyText(o).then((function(e){t.$message({type:"success",message:"复制成功"})}))),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.log(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},getData:function(){var e=this;return Object(o["a"])(Object(c["a"])().mark((function t(){var a,n,r;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l(e.paramsObj);case 3:a=t.sent,200===a.code&&(e.tableData=(null===a||void 0===a||null===(n=a.result)||void 0===n?void 0:n.records)||[],e.paramsObj.total=null===(r=a.result)||void 0===r?void 0:r.total,e.tableData.forEach((function(t){t.privateKey&&t.privateKey.length>20&&(t.privateKeyCopy=t.privateKey.substring(0,20)),t.publicKey&&t.publicKey.length>20&&(t.publicKeyCopy=t.publicKey.substring(0,20)),t.menuCode&&(t.menuCodeNameCn=e.menuList.find((function(e){return e.key==t.menuCode})).value)}))),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},handleSizeChange:function(e){this.paramsObj.size=e,this.getData()},handleCurrentChange:function(e){this.paramsObj.current=e,this.getData()}},mounted:function(){var e=this,t=function(){var t=Object(o["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getLeftMenuTypeFn();case 3:return t.next=5,e.getData();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}},k=x,K=(a("c0d7"),Object(y["a"])(k,n,r,!1,null,"e0d75422",null));t["default"]=K.exports},"74e9":function(e,t,a){},"7db0":function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").find,c=a("44d2"),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),c(o)},c0d7:function(e,t,a){"use strict";a("74e9")},cb31:function(e,t,a){},f04b:function(e,t,a){"use strict";a("cb31")}}]);